<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DoubleValue.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">PMML class model evaluator code coverage</a> &gt; <a href="index.source.html" class="el_package">org.jpmml.evaluator</a> &gt; <span class="el_source">DoubleValue.java</span></div><h1>DoubleValue.java</h1><pre class="source lang-java linenums">/*
 * Copyright (c) 2017 Villu Ruusmann
 *
 * This file is part of JPMML-Evaluator
 *
 * JPMML-Evaluator is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * JPMML-Evaluator is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with JPMML-Evaluator.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
 */
package org.jpmml.evaluator;

public class DoubleValue extends Value&lt;Double&gt; {

<span class="fc" id="L23">	protected double value = 0d;</span>


	@Operation (
		value = &quot;${0}&quot;
	)
<span class="fc" id="L29">	public DoubleValue(double value){</span>
<span class="fc" id="L30">		this.value = value;</span>
<span class="fc" id="L31">	}</span>

	@Override
	public int compareTo(Value&lt;Double&gt; that){
<span class="fc" id="L35">		return Double.compare(this.doubleValue(), that.doubleValue());</span>
	}

	@Override
	public String toString(){
<span class="nc" id="L40">		return Double.toString(this.value);</span>
	}

	@Override
	public int hashCode(){
<span class="nc" id="L45">		long bits = Double.doubleToLongBits(this.value);</span>

<span class="nc" id="L47">		return (int)(bits ^ (bits &gt;&gt;&gt; 32));</span>
	}

	@Override
	public boolean equals(Object object){

<span class="pc bpc" id="L53" title="1 of 2 branches missed.">		if(object instanceof DoubleValue){</span>
<span class="fc" id="L54">			DoubleValue that = (DoubleValue)object;</span>

<span class="pc bpc" id="L56" title="1 of 2 branches missed.">			return (Double.doubleToLongBits(this.value) == Double.doubleToLongBits(that.value));</span>
		}

<span class="nc" id="L59">		return false;</span>
	}

	@Override
	public DoubleValue copy(){
<span class="fc" id="L64">		return new DoubleValue(this.value);</span>
	}

	@Override
	public DoubleValue add(double value){
<span class="fc" id="L69">		this.value += value;</span>

<span class="fc" id="L71">		return this;</span>
	}

	@Override
	public DoubleValue add(Value&lt;? extends Number&gt; value){
<span class="fc" id="L76">		this.value += value.doubleValue();</span>

<span class="fc" id="L78">		return this;</span>
	}

	@Override
	public DoubleValue add(double coefficient, Number factor){
<span class="fc" id="L83">		this.value += coefficient * factor.doubleValue();</span>

<span class="fc" id="L85">		return this;</span>
	}

	@Override
	public DoubleValue add(double coefficient, Number firstFactor, Number secondFactor){
<span class="nc" id="L90">		this.value += coefficient * firstFactor.doubleValue() * secondFactor.doubleValue();</span>

<span class="nc" id="L92">		return this;</span>
	}

	@Override
	public DoubleValue add(double coefficient, Number... factors){
<span class="nc" id="L97">		double value = coefficient;</span>

<span class="nc bnc" id="L99" title="All 2 branches missed.">		for(int i = 0; i &lt; factors.length; i++){</span>
<span class="nc" id="L100">			Number factor = factors[i];</span>

<span class="nc" id="L102">			value *= factor.doubleValue();</span>
		}

<span class="nc" id="L105">		this.value += value;</span>

<span class="nc" id="L107">		return this;</span>
	}

	@Override
	public DoubleValue add(double coefficient, Number factor, int exponent){
<span class="fc" id="L112">		this.value += coefficient * Math.pow(factor.doubleValue(), exponent);</span>

<span class="fc" id="L114">		return this;</span>
	}

	@Override
	public DoubleValue subtract(double value){
<span class="fc" id="L119">		this.value -= value;</span>

<span class="fc" id="L121">		return this;</span>
	}

	@Override
	public DoubleValue subtract(Value&lt;? extends Number&gt; value){
<span class="fc" id="L126">		this.value -= value.doubleValue();</span>

<span class="fc" id="L128">		return this;</span>
	}

	@Override
	public DoubleValue multiply(double value){
<span class="fc" id="L133">		this.value *= value;</span>

<span class="fc" id="L135">		return this;</span>
	}

	@Override
	public DoubleValue multiply(Value&lt;? extends Number&gt; value){
<span class="nc" id="L140">		this.value *= value.doubleValue();</span>

<span class="nc" id="L142">		return this;</span>
	}

	@Override
	public DoubleValue multiply(Number factor, double exponent){
<span class="nc" id="L147">		this.value *= Math.pow(factor.doubleValue(), exponent);</span>

<span class="nc" id="L149">		return this;</span>
	}

	@Override
	public DoubleValue divide(double value){
<span class="fc" id="L154">		this.value /= value;</span>

<span class="fc" id="L156">		return this;</span>
	}

	@Override
	public DoubleValue divide(Value&lt;? extends Number&gt; value){
<span class="fc" id="L161">		this.value /= value.doubleValue();</span>

<span class="fc" id="L163">		return this;</span>
	}

	@Override
	public DoubleValue residual(Value&lt;? extends Number&gt; value){
<span class="fc" id="L168">		this.value = 1d - value.doubleValue();</span>

<span class="fc" id="L170">		return this;</span>
	}

	@Override
	public DoubleValue square(){
<span class="nc" id="L175">		this.value *= this.value;</span>

<span class="nc" id="L177">		return this;</span>
	}

	@Override
	public DoubleValue power(double value){
<span class="fc" id="L182">		this.value = Math.pow(this.value, value);</span>

<span class="fc" id="L184">		return this;</span>
	}

	@Override
	public DoubleValue reciprocal(){
<span class="nc" id="L189">		this.value = 1d / this.value;</span>

<span class="nc" id="L191">		return this;</span>
	}

	@Override
	public DoubleValue elliott(){
<span class="nc" id="L196">		this.value /= (1d + Math.abs(this.value));</span>

<span class="nc" id="L198">		return this;</span>
	}

	@Override
	public DoubleValue exp(){
<span class="fc" id="L203">		this.value = Math.exp(this.value);</span>

<span class="fc" id="L205">		return this;</span>
	}

	@Override
	public DoubleValue ln(){
<span class="fc" id="L210">		this.value = Math.log(this.value);</span>

<span class="fc" id="L212">		return this;</span>
	}

	@Override
	public DoubleValue gauss(){
<span class="nc" id="L217">		this.value = Math.exp(-(this.value * this.value));</span>

<span class="nc" id="L219">		return this;</span>
	}

	@Override
	public DoubleValue inverseLogit(){
<span class="fc" id="L224">		this.value = 1d / (1d + Math.exp(-this.value));</span>

<span class="fc" id="L226">		return this;</span>
	}

	@Override
	public DoubleValue inverseCloglog(){
<span class="nc" id="L231">		this.value = 1d - Math.exp(-Math.exp(this.value));</span>

<span class="nc" id="L233">		return this;</span>
	}

	@Override
	public DoubleValue inverseLoglog(){
<span class="nc" id="L238">		this.value = Math.exp(-Math.exp(-this.value));</span>

<span class="nc" id="L240">		return this;</span>
	}

	@Override
	public DoubleValue inverseLogc(){
<span class="nc" id="L245">		this.value = 1d - Math.exp(this.value);</span>

<span class="nc" id="L247">		return this;</span>
	}

	@Override
	public DoubleValue inverseNegbin(double value){
<span class="nc" id="L252">		this.value = 1d / (value * (Math.exp(-this.value) - 1d));</span>

<span class="nc" id="L254">		return this;</span>
	}

	@Override
	public DoubleValue inverseOddspower(double value){

<span class="nc bnc" id="L260" title="All 4 branches missed.">		if(value &lt; 0d || value &gt; 0d){</span>
<span class="nc" id="L261">			this.value = 1d / (1d + Math.pow(1d + (value * this.value), -(1d / value)));</span>
		} else

		{
<span class="nc" id="L265">			this.value = 1d / (1d + Math.exp(-this.value));</span>
		}

<span class="nc" id="L268">		return this;</span>
	}

	@Override
	public DoubleValue inversePower(double value){

<span class="pc bpc" id="L274" title="2 of 4 branches missed.">		if(value &lt; 0d || value &gt; 0d){</span>
<span class="fc" id="L275">			this.value = Math.pow(this.value, 1d / value);</span>
		} else

		{
<span class="nc" id="L279">			this.value = Math.exp(this.value);</span>
		}

<span class="fc" id="L282">		return this;</span>
	}

	@Override
	public DoubleValue inverseCauchit(){
<span class="nc" id="L287">		this.value = 0.5d + (1d / DoubleValue.PI) * Math.atan(this.value);</span>

<span class="nc" id="L289">		return this;</span>
	}

	@Override
	public DoubleValue inverseProbit(){
<span class="fc" id="L294">		this.value = NormalDistributionUtil.cumulativeProbability(this.value);</span>

<span class="fc" id="L296">		return this;</span>
	}

	@Override
	public DoubleValue sin(){
<span class="nc" id="L301">		this.value = Math.sin(this.value);</span>

<span class="nc" id="L303">		return this;</span>
	}

	@Override
	public DoubleValue cos(){
<span class="nc" id="L308">		this.value = Math.cos(this.value);</span>

<span class="nc" id="L310">		return this;</span>
	}

	@Override
	public DoubleValue arctan(){
<span class="nc" id="L315">		this.value = (2d * Math.atan(this.value)) / DoubleValue.PI;</span>

<span class="nc" id="L317">		return this;</span>
	}

	@Override
	public DoubleValue tanh(){
<span class="nc" id="L322">		this.value = Math.tanh(this.value);</span>

<span class="nc" id="L324">		return this;</span>
	}

	@Override
	public DoubleValue threshold(double value){
<span class="nc bnc" id="L329" title="All 2 branches missed.">		this.value = (this.value &gt; value ? 1d : 0d);</span>

<span class="nc" id="L331">		return this;</span>
	}

	@Override
	public DoubleValue relu(){
<span class="nc" id="L336">		this.value = Math.max(this.value, 0);</span>

<span class="nc" id="L338">		return this;</span>
	}

	@Override
	public DoubleValue abs(){
<span class="fc" id="L343">		this.value = Math.abs(this.value);</span>

<span class="fc" id="L345">		return this;</span>
	}

	@Override
	public DoubleValue gaussSim(double value){
<span class="nc" id="L350">		this.value = Math.exp((-Math.log(2d) * this.value * this.value) / (value * value));</span>

<span class="nc" id="L352">		return this;</span>
	}

	@Override
	public DoubleValue restrict(double lowValue, double highValue){
<span class="fc" id="L357">		this.value = Math.max(this.value, lowValue);</span>
<span class="fc" id="L358">		this.value = Math.min(this.value, highValue);</span>

<span class="fc" id="L360">		return this;</span>
	}

	@Override
	public DoubleValue round(){
<span class="fc" id="L365">		this.value = Math.round(this.value);</span>

<span class="fc" id="L367">		return this;</span>
	}

	@Override
	public DoubleValue ceiling(){
<span class="nc" id="L372">		this.value = Math.ceil(this.value);</span>

<span class="nc" id="L374">		return this;</span>
	}

	@Override
	public DoubleValue floor(){
<span class="nc" id="L379">		this.value = Math.floor(this.value);</span>

<span class="nc" id="L381">		return this;</span>
	}

	@Override
	public DoubleValue denormalize(double leftOrig, double leftNorm, double rightOrig, double rightNorm){
<span class="fc" id="L386">		this.value = ((this.value - leftNorm) / (rightNorm - leftNorm)) * (rightOrig - leftOrig) + leftOrig;</span>

<span class="fc" id="L388">		return this;</span>
	}

	@Override
	public boolean equals(double value){
<span class="fc bfc" id="L393" title="All 2 branches covered.">		return this.value == value;</span>
	}

	@Override
	public int compareTo(double value){
<span class="fc" id="L398">		return Double.compare(this.value, value);</span>
	}

	@Override
	public float floatValue(){
<span class="fc" id="L403">		return (float)this.value;</span>
	}

	@Override
	public double doubleValue(){
<span class="fc" id="L408">		return this.value;</span>
	}

	@Override
	public Double getValue(){
<span class="fc" id="L413">		return this.value;</span>
	}

	public static final double E = Math.E;
	public static final double PI = Math.PI;
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.0.201801022044</span></div></body></html>